
<nav class="outline-menu">
  <ul>
    <li><a href="#">Top</a></li>
    <li><a href="#overview">Overview</a>
      <ul>
        <li><a href="#problem-space">Problem Space</a></li>
        <li><a href="#solution">The Solution</a></li>
        <li><a href="#product">The Product</a></li>
      </ul>
    </li>

    <li><a href="#details">The Details</a>
      <ul>
        <li><a href="#research">Research</a></li>
        <li><a href="#prototyping">Prototyping</a></li>
        <li><a href="#user-testing">User Testing</a></li>
        <li><a href="#features-design">Features & Design</a></li>
      </ul>
    </li>

    <li><a href="#reflections">Reflections</a></li>

  </ul>
</nav>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const links = document.querySelectorAll(".outline-menu a");

  const sections = Array.from(links)
    .map(link => {
      const id = link.getAttribute("href");
      return document.querySelector(id);
    })
    .filter(Boolean); // remove nulls

  function updateActiveLink() {
    let scrollY = window.scrollY;

    let currentSection = null;

    for (let section of sections) {
      if (scrollY >= section.offsetTop - 150) {
        currentSection = section;
      }
    }

    links.forEach(link => link.classList.remove("active"));

    if (currentSection) {
      const id = currentSection.getAttribute("id");
      const activeLink = document.querySelector(`.outline-menu a[href="#${id}"]`);
      if (activeLink) {
        activeLink.classList.add("active");
      }
    }
  }

  window.addEventListener("scroll", updateActiveLink);
  updateActiveLink(); // run once on load
});
</script>
